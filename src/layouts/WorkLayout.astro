---
import Layout from './Layout.astro'
import { LanguageSwitcher } from '../components/LanguageSwitcher'
import Footer from '../components/Footer'
import { t } from '../lib/translations'

interface Props {
  title: string
  description: string
  projectTitle: string
  projectSubtitle?: string
}

const { title, description, projectTitle, projectSubtitle } = Astro.props
const lang = Astro.currentLocale as 'hu' | 'en'
---

<Layout title={title} description={description} lang={lang}>
  <div class="min-h-dvh w-full bg-white text-black antialiased">
    {/* Header */}
    <header class="sticky top-0 z-40 w-full border-b border-black/5 bg-white/70 backdrop-blur">
      <div class="mx-auto flex h-16 max-w-6xl items-center justify-between px-4">
        <a href={lang === 'hu' ? '/' : '/en/'} class="group flex items-center gap-3" aria-label={t(lang, 'navigation.ariaLabels.dendoraHome')}>
          {/* Logo */}
          <div class="relative h-8 w-8">
            <div class="absolute inset-0 rounded-lg bg-black" />
            <div class="absolute left-1 top-1 h-6 w-6 rounded-lg bg-white" />
            <div class="absolute right-1 top-1 h-6 w-3 rounded-r-lg bg-black" />
          </div>
          <div class="flex flex-col items-start text-left">
            <span class="text-sm font-semibold tracking-wide">{t(lang, 'hero.brandCard.companyName')}</span>
            <span class="text-[10px] uppercase tracking-[0.18em] text-black/60">{t(lang, 'hero.brandCard.tagline')}</span>
          </div>
        </a>

        {/* Navigation & Language Switcher */}
        <div class="flex items-center gap-4">
          <LanguageSwitcher currentLang={lang} client:load />
          <a href="mailto:hello@dendora.hu" class="hidden md:inline-flex items-center gap-2 rounded-full bg-black px-4 py-2 text-sm font-medium text-white transition hover:bg-black/85">
            <svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
            </svg>
            <span>{t(lang, 'navigation.contact')}</span>
          </a>
        </div>
      </header>

      {/* Work Section Header */}
      <section class="border-b border-black/5 bg-gray-50/30">
        <div class="mx-auto max-w-6xl px-4 py-8">
          {/* Breadcrumb */}
          <nav class="mb-6" aria-label="Breadcrumb">
            <ol class="flex items-center gap-2 text-sm text-black/60">
              <li>
                <a href={lang === 'hu' ? '/' : '/en/'} class="hover:text-black transition-colors">
                  {t(lang, 'navigation.home')}
                </a>
              </li>
              <li class="flex items-center gap-2">
                <svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                </svg>
                <span>{t(lang, 'navigation.work')}</span>
              </li>
              {projectTitle && (
                <li class="flex items-center gap-2">
                  <svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                  </svg>
                  <span class="text-black font-medium">{projectTitle}</span>
                </li>
              )}
            </ol>
          </nav>

          {/* Section Title */}
          <div class="flex items-start justify-between">
            <div>
              <h1 class="text-2xl font-semibold tracking-tight md:text-3xl text-black">
                {projectTitle || t(lang, 'work.title')}
              </h1>
              {projectSubtitle && (
                <p class="mt-2 text-black/65 max-w-2xl">
                  {projectSubtitle}
                </p>
              )}
            </div>
            
            {/* Back to Work Link */}
            <a 
              href={lang === 'hu' ? '/#work' : '/en/#work'}
              class="inline-flex items-center gap-2 text-sm text-black/70 hover:text-black transition-colors"
            >
              <svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"/>
              </svg>
              {t(lang, 'work.title')}
            </a>
          </div>
        </div>
      </section>

      {/* Content */}
      <main>
        <slot />
      </main>

      <Footer language={lang} client:load />
    </div>
</Layout>